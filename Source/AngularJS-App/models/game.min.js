"use strict";const Game={BoardSize:{w:10,h:20},Colors:["#0066FF","#FFE100","#00C3FF","#00FFDA","#00FF6E","#C0FF00","#F3FF00","#2200FF","#FFAA00","#FF7400","#FF2B00","#FF0000","#000000"],BoardActions:{ADD:0,REMOVE:1,SOLIDIFY:2},checkIfTetrominoCanGoThere:function(n,t){let i=Tetromino.getSquares(n);for(let r=0;r<i.length;r++)for(let u=0;u<i[r].length;u++)if(i[r][u]!=null){let i=n.y+r,f=n.x+u;if(i>Game.BoardSize.h-1||i<0||f<0||f>Game.BoardSize.w-1||t[i][f]<0)return!1}return!0},checkIfTetrominoCanMoveDown:function(n,t){let i=JSON.parse(JSON.stringify(n));return i.y++,Game.checkIfTetrominoCanGoThere(i,t)},modifyBoard:function(n,t,i){let r=Tetromino.getSquares(n);for(let u=0;u<r.length;u++)for(let f=0;f<r[u].length;f++)if(r[u][f]!=null&&r[u][f]!=0){let r=n.y+u,e=n.x+f;i==Game.BoardActions.SOLIDIFY?t[r][e]=-n.type:i==Game.BoardActions.REMOVE?t[r][e]=0:i==Game.BoardActions.ADD&&(t[r][e]=n.type)}},checkForTetris:function(n){for(let t=Game.BoardSize.h-1;t>0;t--){let i=!0;for(let r=0;r<Game.BoardSize.w;r++)if(n.board[t][r]>=0){i=!1;break}if(i){n.lines++;n.score=n.score+100+(n.level-1)*50;for(let i=t;i>0;i--)for(let t=0;t<Game.BoardSize.w;t++)n.board[i][t]=n.board[i-1][t];return n.lines%5==0&&n.level++,!0}}return!1},getGameColor:function(n){if(n)return Game.Colors[n.level%Game.Colors.length]},getSquareColor:function(n,t,i){let r=n.board[t][i];return r<0?Tetromino.Colors[Math.abs(r)]:Tetromino.Colors[r]},getSquareCssClass:function(n,t,i){let r=n.board[t][i];return r==0?"Square ":r<0?"Square SolidSquare":"Square TetrominoSquare"},getNextTetrominoColor:function(n,t,i){let r=n.nextTetrominoSquares[t][i];return r==0?$scope.getGameColor():Tetromino.Colors[r]},getDelay:function(n){let t=1e3;return n.level<5?t-120*(n.level-1):n.level<15?t-58*(n.level-1):220-(n.level-15)*8},gameState:function(){this.startButtonText="Start";this.level=1;this.score=0;this.lines=0;this.running=!1;this.paused=!1;this.fallingTetromino=null;this.nextTetromino=null;this.nextTetrominoSquares=null;this.board=null;this.tetrominoBag=[];this.fullTetrominoBag=[0,5,5,5,5,5,5,5];this.tetrominoHistory=[];this.isHighscore=!1}};